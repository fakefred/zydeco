codata Sum where
  .more(Int): Sum
  .done(): F(Int)

let sum = {
  rec (sum: U(Sum)) ->
    comatch
    | .done() -> ret 0
    | .more(x) ->
      ( comatch
        | .done() -> ret x 
        | .more(y) ->
          ( do z <- x + y;
            ! sum .more(z) ) )
};

! sum .more(1) .more(2) .done()